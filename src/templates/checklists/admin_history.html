{% extends 'base_admin.html' %}

{% block title %}–ñ—É—Ä–Ω–∞–ª –ø—Ä–æ–≤–µ—Ä–æ–∫{% endblock %}

{% block content %}
<h1 class="mb-4">üóÇ –ñ—É—Ä–Ω–∞–ª –ø—Ä–æ–≤–µ—Ä–æ–∫</h1>

<div class="card shadow-sm">
    <div class="card-body p-0">
        <table class="table table-hover mb-0 align-middle">
            <!-- align-middle —Ü–µ–Ω—Ç—Ä—É–µ—Ç —Ç–µ–∫—Å—Ç –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ -->
            <thead class="table-light">
            <tr>
                <th>ID</th>
                <th>–î–∞—Ç–∞</th>
                <th>–£—á–∞—Å—Ç–æ–∫</th>
                <th>–®–∞–±–ª–æ–Ω</th>
                <th>–ò—Ç–æ–≥</th> <!-- –ù–û–í–ê–Ø –ö–û–õ–û–ù–ö–ê -->
                <th style="min-width: 250px;">–ü—Ä–æ–≤–µ—Ä—è—é—â–∏–π</th>
                <th>–î–µ–π—Å—Ç–≤–∏–µ</th>
            </tr>
            </thead>
            <tbody>
            {% for inspection in inspections %}
            <!-- –õ–æ–≥–∏–∫–∞ —Ü–≤–µ—Ç–∞ —Å—Ç—Ä–æ–∫–∏ -->
            <!-- –ï—Å–ª–∏ 0 –Ω–∞—Ä—É—à–µ–Ω–∏–π - –∑–µ–ª–µ–Ω—ã–π —Ñ–æ–Ω, –∏–Ω–∞—á–µ - –∫—Ä–∞—Å–Ω—ã–π -->
            <tr class="{% if inspection.violation_count == 0 %}table-success{% else %}table-danger{% endif %}">

                <td>#{{ inspection.id }}</td>
                <td>{{ inspection.date_check|date:"d.m.Y" }}</td>
                <td>{{ inspection.location_snapshot }}</td>
                <td>{{ inspection.template.name }}</td>

                <!-- –ö–û–õ–û–ù–ö–ê –ò–¢–û–ì -->
                <td>
                    {% if inspection.violation_count == 0 %}
                    <span class="badge bg-success">
                        <i class="bi bi-check-lg"></i> –ò–¥–µ–∞–ª—å–Ω–æ
                    </span>
                    {% else %}
                    <span class="badge bg-danger">
                        –ù–∞—Ä—É—à–µ–Ω–∏–π: {{ inspection.violation_count }}
                    </span>
                    {% endif %}
                </td>

                <td>
                    <div class="fw-bold text-nowrap">
                        {{ inspection.inspector.get_full_name }}
                    </div>
                    <div class="small text-muted">{{ inspection.inspector.email }}</div>
                </td>

                <td>
                    <!-- –ö–Ω–æ–ø–∫—É –¥–µ–ª–∞–µ–º –±–µ–ª–æ–π/–ø—Ä–æ–∑—Ä–∞—á–Ω–æ–π, —á—Ç–æ–±—ã –Ω–µ —Å–ª–∏–≤–∞–ª–∞—Å—å —Å —Ü–≤–µ—Ç–Ω—ã–º —Ñ–æ–Ω–æ–º -->
                    <a href="{% url 'admin_report_detail' inspection.id %}"
                       class="btn btn-sm btn-light border shadow-sm">
                        –û—Ç–∫—Ä—ã—Ç—å
                    </a>
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="7" class="text-center py-4 text-muted">
                    –ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ –ø–æ–∫–∞ –Ω–µ—Ç.
                </td>
            </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
