{% extends 'base_admin.html' %}

{% block title %}–ì—Ä–∞—Ñ–∏–∫ –ø—Ä–æ–≤–µ—Ä–æ–∫{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h1>üóì –ì—Ä–∞—Ñ–∏–∫ –Ω–∞ –Ω–µ–¥–µ–ª—é</h1>
    <div class="text-muted">
        –ù–µ–¥–µ–ª—è: {{ week_days.0|date:"d.m" }} - {{ week_days.4|date:"d.m" }}
    </div>
</div>

<div class="card shadow-sm">
    <div class="table-responsive">
        <table class="table table-bordered table-hover mb-0 text-center align-middle">
            <thead class="table-light">
                <tr>
                    <th style="min-width: 200px; text-align: left;">–£—á–∞—Å—Ç–æ–∫ / –®–∞–±–ª–æ–Ω</th>
                    {% for day in week_days %}
                        <th style="min-width: 150px;" class="{% if day == today %}table-primary{% endif %}">
                            {{ day|date:"l" }}<br> <!-- –î–µ–Ω—å –Ω–µ–¥–µ–ª–∏ -->
                            <small class="text-muted">{{ day|date:"d.m" }}</small>
                        </th>
                    {% endfor %}
                </tr>
            </thead>
            <tbody>
                {% for row in table_rows %}
                <tr>
                    <!-- –ö–æ–ª–æ–Ω–∫–∞ 1: –ù–∞–∑–≤–∞–Ω–∏–µ —É—á–∞—Å—Ç–∫–∞ -->
                    <td class="text-start fw-bold bg-light">
                        {{ row.template.location.name }}<br>
                        <small class="text-muted fw-normal">{{ row.template.name }}</small>
                    </td>

                    <!-- –ö–æ–ª–æ–Ω–∫–∏ 2-6: –î–Ω–∏ –Ω–µ–¥–µ–ª–∏ -->
                    {% for cell in row.cells %}
                        {% if cell %}
                            <!-- –ï–°–õ–ò –ï–°–¢–¨ –ù–ê–ó–ù–ê–ß–ï–ù–ò–ï -->
                            <!-- –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ü–≤–µ—Ç —è—á–µ–π–∫–∏ -->
                            <td class="{% if cell.inspection.is_completed %}bg-success bg-opacity-25{% else %}bg-danger bg-opacity-10{% endif %}">

                                <!-- –§–ò–û -->
                                <div class="fw-bold small">
                                    {{ cell.inspector.last_name }} {{ cell.inspector.first_name|slice:":1" }}.
                                </div>

                                <!-- –°—Ç–∞—Ç—É—Å (–ò–∫–æ–Ω–∫–∞) -->
                                <div class="mt-1">
                                    {% if cell.inspection.is_completed %}
                                        <a href="{% url 'admin_report_detail' cell.inspection.id %}" class="badge bg-success text-decoration-none">
                                            ‚úÖ –°–¥–∞–Ω–æ
                                        </a>
                                    {% else %}
                                        <span class="badge bg-secondary text-dark bg-opacity-10">
                                            ‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ
                                        </span>
                                    {% endif %}
                                </div>

                                <!-- –ú–µ—Ç–∫–∞ –∞–≤—Ç–æ–∑–∞–º–µ–Ω—ã -->
                                {% if cell.is_swapped %}
                                    <div class="mt-1" title="–ë—ã–ª–∞ –∑–∞–º–µ–Ω–∞">
                                        <i class="bi bi-arrow-left-right text-primary small"></i>
                                    </div>
                                {% endif %}
                            </td>
                        {% else %}
                            <!-- –ï–°–õ–ò –Ø–ß–ï–ô–ö–ê –ü–£–°–¢–ê–Ø -->
                            <td class="bg-light text-muted small">
                                -
                            </td>
                        {% endif %}
                    {% endfor %}
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<div class="mt-3 text-end">
    <a href="/admin/checklists/schedule/" class="btn btn-outline-secondary btn-sm">
        ‚öôÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ Django-Admin
    </a>
</div>
{% endblock %}
